<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>üß† Churn Prediction Analysis</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

    <style>
        body {
            background: url('https://media.istockphoto.com/id/1273237907/photo/business-financial-concept-with-double-exposure-stock-market-up-trading-line.jpg?s=612x612&w=0&k=20&c=7IcMaykcjV01Qgy84VQyxEdLcdoC3WNCfG9pupUd-SA=') no-repeat center center fixed;
            background-size: cover;
            font-family: 'Segoe UI', sans-serif;
            color: white;
        }
        .churn-container {
            background: rgba(0, 0, 0, 0.7);
            padding: 30px;
            margin-top: 30px;
            border-radius: 15px;
            box-shadow: 0 0 25px rgba(0,0,0,0.5);
        }
        h2, h5 {
            text-shadow: 0 0 6px rgba(255,255,255,0.3);
        }
        .btn-home {
            background-color: #1d3557;
            margin-top: 30px;
            border: none;
        }
        .btn-home:hover {
            background-color: #457b9d;
        }
        table {
            background-color: white;
            color: black;
            border-radius: 8px;
            overflow: hidden;
        }
    </style>
</head>
<body>

    <div class="container churn-container">
        <h2 class="text-center mb-4">üß† Churn Model Report</h2>

        <h5>Test Size: {{ test_size }}</h5>
        <h5>Churn Threshold (days): {{ threshold }}</h5>

        <!-- Classification Report Table -->
        <div class="table-responsive my-4">
            {{ metrics.to_html(classes="table table-bordered table-striped text-center", border=0) | safe }}
        </div>

        <hr class="my-5 text-light">

        <h3 class="text-center mb-4">üìà Churn Analysis Visuals</h3>

        <!-- 1st Image -->
        <h5 class="text-center">1Ô∏è‚É£ Days Since Last Purchase Distribution</h5>
        <div class="text-center">
            <img src="/static/churn_days_distribution.png" class="img-thumbnail" style="width: 60%; max-width: 500px;" alt="Days Distribution">
        </div>

        <!-- 2nd Image -->
        <h5 class="text-center mt-5">2Ô∏è‚É£ Average Spend by Churn Status</h5>
        <div class="text-center">
            <img src="/static/churn_total_spent.png" class="img-thumbnail" style="width: 60%; max-width: 500px;" alt="Churn vs Spend">
        </div>

        <!-- 3rd Image -->
        <h5 class="text-center mt-5">3Ô∏è‚É£ Spend vs Recency Scatter Plot</h5>
        <div class="text-center">
            <img src="/static/churn_scatter_plot.png" class="img-thumbnail" style="width: 60%; max-width: 500px;" alt="Scatter Plot">
        </div>

        <!-- Back to Home -->
        <div class="text-center mt-5">
            <a href="/home" class="btn btn-primary btn-home">üè† Back to Home</a>
        </div>
    </div>

</body>
</html>
